
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

    <title>ws.interlanguage.InterlanguageLinks module &#8212; wiki-scripts 1.2 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/wiki-scripts.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ws.parser_helpers package" href="ws.parser_helpers.html" />
    <link rel="prev" title="ws.interlanguage.Decategorization module" href="ws.interlanguage.Decategorization.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-ws.interlanguage.InterlanguageLinks">
<span id="ws-interlanguage-interlanguagelinks-module"></span><h1>ws.interlanguage.InterlanguageLinks module<a class="headerlink" href="#module-ws.interlanguage.InterlanguageLinks" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ws.interlanguage.InterlanguageLinks.</span></span><span class="sig-name descname"><span class="pre">InterlanguageLinks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Update interlanguage links on ArchWiki based on the following algorithm:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Fetch list of all pages with prop=langlinks to be able to build a
langlink graph (separate from the content dict for quick searching).</p></li>
<li><p>Group pages into families based on their title, which is the primary key
to denote a family. The grouping is case-insensitive and includes even
pages without any interlanguage links. The family name corresponds to
the only English page in the family (or when not present, to the English
base of the localized title).</p></li>
<li><p>For every page on the wiki:</p>
<ol class="loweralpha simple">
<li><p>Determine the family of the page.</p></li>
<li><p>Assemble a set of pages in the family. This is done by first
including the pages in the group from step 2., then pulling any
internal langlinks from the pages in the set (in unspecified order),
and finally based on the presence of an English page in the family:</p>
<ul class="simple">
<li><p>If there is an English page directly in the group from step 2. or
if other pages link to an English page whose group can be merged
with the current group without causing a conflict, its external
langlinks are pulled in. As a result, external langlinks removed
from the English page are assumed to be invalid and removed also
from other pages in the family. For consistency, also internal
langlinks are pulled from the English page.</p></li>
<li><p>If the pulling from an English page was not done, external
langlinks are pulled from the other pages (in unspecified order),
which completes the previous inclusion of internal langlinks.</p></li>
</ul>
</li>
<li><p>Check if it is necessary to update the page by comparing the new set
of langlinks for a page (i.e. <code class="docutils literal notranslate"><span class="pre">family.titles</span> <span class="pre">-</span> <span class="pre">{title}</span></code>) with the
old set obtained from the wiki’s API. If an update is needed:</p>
<ul class="simple">
<li><p>Fetch content of the page.</p></li>
<li><p>Update the langlinks of the page.</p></li>
<li><p>If there is a difference, save the page.</p></li>
</ul>
</li>
</ol>
</li>
</ol>
</div></blockquote>
<dl class="py attribute">
<dt class="sig sig-object py" id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks.content_namespaces">
<span class="sig-name descname"><span class="pre">content_namespaces</span></span><em class="property"> <span class="pre">=</span> <span class="pre">[0,</span> <span class="pre">4,</span> <span class="pre">10,</span> <span class="pre">12,</span> <span class="pre">14]</span></em><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks.content_namespaces" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks.edit_summary">
<span class="sig-name descname"><span class="pre">edit_summary</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'update</span> <span class="pre">interlanguage</span> <span class="pre">links'</span></em><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks.edit_summary" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks.allpages">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">allpages</span></span><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks.allpages" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks.wrapped_titles">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">wrapped_titles</span></span><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks.wrapped_titles" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks.titles_in_family">
<span class="sig-name descname"><span class="pre">titles_in_family</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">master_title</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks.titles_in_family" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the titles in the family corresponding to <code class="docutils literal notranslate"><span class="pre">master_title</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>master_title</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – a page title (does not have to be English page)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <code class="docutils literal notranslate"><span class="pre">(titles,</span> <span class="pre">tags)</span></code> tuple, where <code class="docutils literal notranslate"><span class="pre">titles</span></code> is the set of titles
in the family (including <code class="docutils literal notranslate"><span class="pre">title</span></code>) and <code class="docutils literal notranslate"><span class="pre">tags</span></code> is the set of
corresponding language tags</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks.get_langlinks">
<span class="sig-name descname"><span class="pre">get_langlinks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">full_title</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks.get_langlinks" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses <code class="xref py py-meth docutils literal notranslate"><span class="pre">self.titles_in_family()</span></code> to get the titles of all pages in
the family, removes the link to the passed title and sorts the list by
the language subtag.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of <code class="docutils literal notranslate"><span class="pre">(tag,</span> <span class="pre">title)</span></code> tuples</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks.update_page">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">update_page</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">langlinks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weak_update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks.update_page" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – title of the page</p></li>
<li><p><strong>text</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – wikitext of the page</p></li>
<li><p><strong>langlinks</strong> – a sorted list of <code class="docutils literal notranslate"><span class="pre">(tag,</span> <span class="pre">title)</span></code> tuples as obtained
from <code class="xref py py-meth docutils literal notranslate"><span class="pre">self.get_langlinks()</span></code></p></li>
<li><p><strong>weak_update</strong> – When <code class="docutils literal notranslate"><span class="pre">True</span></code>, the langlinks present on the page are mixed with those
suggested by <code class="docutils literal notranslate"><span class="pre">family_titles</span></code>. This is necessary only when there are
multiple “intersecting” families, in which case the intersection should
be preserved and solved manually. This is reported in _merge_families.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>updated wikicode</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks.update_allpages">
<span class="sig-name descname"><span class="pre">update_allpages</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks.update_allpages" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks.find_orphans">
<span class="sig-name descname"><span class="pre">find_orphans</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks.find_orphans" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns list of pages that are alone in their families.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks.rename_non_english">
<span class="sig-name descname"><span class="pre">rename_non_english</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks.rename_non_english" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/wiki-scripts.png" alt="Logo"/>
    
  </a>
</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Writing new scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../modules.html">API reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="ws.html">ws package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="ws.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="ws.ArchWiki.html">ws.ArchWiki package</a></li>
<li class="toctree-l4"><a class="reference internal" href="ws.checkers.html">ws.checkers package</a></li>
<li class="toctree-l4"><a class="reference internal" href="ws.client.html">ws.client package</a></li>
<li class="toctree-l4"><a class="reference internal" href="ws.db.html">ws.db package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="ws.interlanguage.html">ws.interlanguage package</a></li>
<li class="toctree-l4"><a class="reference internal" href="ws.parser_helpers.html">ws.parser_helpers package</a></li>
<li class="toctree-l4"><a class="reference internal" href="ws.utils.html">ws.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ws.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../modules.html">API reference</a><ul>
  <li><a href="ws.html">ws package</a><ul>
  <li><a href="ws.interlanguage.html">ws.interlanguage package</a><ul>
      <li>Previous: <a href="ws.interlanguage.Decategorization.html" title="previous chapter">ws.interlanguage.Decategorization module</a></li>
      <li>Next: <a href="ws.parser_helpers.html" title="next chapter">ws.parser_helpers package</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2014-2021, Jakub Klinkovský.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/ws/ws.interlanguage.InterlanguageLinks.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>