<VirtualHost *:80>
    DocumentRoot /usr/share/webapps/mediawiki

    # Enable AllowEncodedSlashes for VisualEditor
    AllowEncodedSlashes NoDecode
</VirtualHost>

<Directory "/usr/share/webapps/mediawiki">
    php_admin_value open_basedir "/var/lib/mediawiki/:/etc/webapps/:/usr/share/webapps/:/tmp/:/usr/bin/"
    AllowOverride All
    Options FollowSymlinks
    Require all granted

    # Enable short URLs https://www.mediawiki.org/wiki/Manual:Short_URL/Apache
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^wiki/(.*)$ index.php/$1 [PT,L,QSA]
    RewriteRule ^wiki/*$ index.php [L,QSA]
    RewriteRule ^wiki$ index.php [L,QSA]
</Directory>
